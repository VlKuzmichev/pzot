--  SELECT test_id, count(*) AS count_1 FROM results r WHERE r.user_id = 100005 group by r.test_id;
-- SELECT r.test_id, count(a), count_1 FROM results r, answers a, (SELECT test_id, count(*) FROM results r WHERE r.user_id = 100005 group by r.test_id) as count_1 WHERE r.question_id = a.question_id AND r.user_id = 100005 group by r.test_id, count_1;

SELECT r.test_id, user_id, 100 / (count(a) / count(count_answers))
    AS percent
FROM results r, answers a,
     (SELECT test_id, count(*)
     FROM results r
     WHERE r.user_id = 100005
     group by r.test_id) as count_answers
WHERE r.question_id = a.question_id
  AND r.user_id = 100005
  AND r.test_id = count_answers.test_id
group by r.test_id, user_id, count_answers.count;

SELECT count(answ) FROM (SELECT question_id FROM answers, questions WHERE question_id = questions.id GROUP BY question_id) as answ

SELECT test_id, count(*)
FROM results r
WHERE r.user_id = 100005
group by r.test_id;